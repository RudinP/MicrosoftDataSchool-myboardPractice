{% extends 'base.html' %}
{% block title %}FMS ê²°ê³¼ ë³´ê¸°{% endblock %}
{% block content %}

<div class="flex items-center justify-between mb-6">
  <h2 class="text-2xl font-bold text-gray-800">FMS í†µí•© ê²°ê³¼</h2>
  <a
    href="{{ url_for('fms_analytics') }}"
    class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-pink-100 text-pink-700 hover:bg-pink-200 transition-colors shadow-sm"
  >
    <span class="mr-2">ğŸ“Š</span> ë¶„ì„ ëŒ€ì‹œë³´ë“œ ë³´ê¸°
  </a>
</div>

{% if results %}
<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
  {% for row in results %}
  {% set status = row['ë¶€ì í•©ì—¬ë¶€'] %}
  {% set is_pass = status in ['Pass', 'PASS', 'pass', 'í•©ê²©', 'Y', 'N'] %}
  <div class="bg-white rounded-2xl shadow-md p-4 border border-pink-100 hover:shadow-lg transition-shadow">
    <div class="flex items-center justify-between mb-2">
      <div>
        <p class="text-xs text-gray-400">ìœ¡ê³„ë²ˆí˜¸</p>
        <p class="font-semibold text-gray-800 text-sm">
          {{ row['ìœ¡ê³„ë²ˆí˜¸'] }}
        </p>
      </div>
      <span
        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold
          {% if is_pass %}
            bg-emerald-100 text-emerald-700
          {% else %}
            bg-rose-100 text-rose-700
          {% endif %}"
      >
        {% if is_pass %}
        <span class="mr-1">âœ…</span> {{ status or 'Pass' }}
        {% else %}
        <span class="mr-1">âš ï¸</span> {{ status or 'Fail' }}
        {% endif %}
      </span>
    </div>

    <div class="mt-2 space-y-1 text-xs text-gray-700">
      <div class="flex justify-between">
        <span class="text-gray-500">í’ˆì¢…</span>
        <span class="font-medium text-indigo-700">{{ row['í’ˆì¢…'] }}</span>
      </div>
      <div class="flex justify-between">
        <span class="text-gray-500">ì¢…ë€ë¬´ê²Œ</span>
        <span class="font-medium">{{ row['ì¢…ë€ë¬´ê²Œ'] }}</span>
      </div>
      <div class="flex justify-between">
        <span class="text-gray-500">ì²´ì˜¨</span>
        <span class="font-medium">{{ row['ì²´ì˜¨'] }}</span>
      </div>
      <div class="flex justify-between">
        <span class="text-gray-500">í˜¸í¡ìˆ˜ / í˜¸ìˆ˜</span>
        <span class="font-medium">
          {{ row['í˜¸í¡ìˆ˜'] }} / {{ row['í˜¸ìˆ˜'] }}
        </span>
      </div>
      <div class="flex justify-between">
        <span class="text-gray-500">ì£¼ë¬¸ë²ˆí˜¸</span>
        <span class="font-medium">{{ row['ì£¼ë¬¸ë²ˆí˜¸'] }}</span>
      </div>
      <div class="flex justify-between">
        <span class="text-gray-500">ê³ ê°ì‚¬</span>
        <span class="font-medium text-pink-600">{{ row['ê³ ê°ì‚¬'] }}</span>
      </div>
      <div class="flex justify-between">
        <span class="text-gray-500">ë„ì°©ì¼ / ë„ì°©ì§€</span>
        <span class="font-medium">
          {{ row['ë„ì°©ì¼'] }} Â· {{ row['ë„ì°©ì§€'] }}
        </span>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<p class="text-sm text-gray-500">í‘œì‹œí•  FMS ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
{% endif %}

{% endblock %}
